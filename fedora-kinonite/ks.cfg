# Generated by Anaconda 38.23.4
# Generated by pykickstart v3.47
#version=F38
# Use graphical install
graphical


# Package Selection
%packages
mesa-libGLU
%end

%post --erroronfail
cp /etc/skel/.bash* /root

#Dissable the folowing Repos
sed -i 's/enabled=1/enabled=0/' /etc/yum.repos.d/_copr:copr.fedorainfracloud.org:phracek:PyCharm.repo
sed -i 's/enabled=1/enabled=0/' /etc/yum.repos.d/fedora-cisco-openh264.repo
sed -i 's/enabled=1/enabled=0/' /etc/yum.repos.d/google-chrome.repo
sed -i 's/enabled=1/enabled=0/' /etc/yum.repos.d/rpmfusion-nonfree-nvidia-driver.repo
sed -i 's/enabled=1/enabled=0/' /etc/yum.repos.d/rpmfusion-nonfree-steam.repo

#Use Dark Theme
kwriteconfig5 --file kdeglobals --group KDE --key LookAndFeelPackage org.kde.breezedark.desktop

#Create link to post install
mkdir /root/Desktop
cat > /root/Desktop/fetch_post_install.sh << EOL
#!/bin/bash
bash <(curl -s https://raw.githubusercontent.com/alextrical/Fedora-Kinonite-Fablab-Kickstart/main/bin/post_install.sh)
EOL
chmod +x /root/Desktop/fetch_post_install.sh

%end

# Keyboard layouts
keyboard --vckeymap=gb --xlayouts='gb'
# System language
lang en_GB.UTF-8

# Firewall configuration
firewall --use-system-defaults

# OSTree setup
ostreesetup --osname="fedora" --remote="fedora" --url="file:///ostree/repo" --ref="fedora/38/x86_64/kinoite" --nogpg

# Run the Setup Agent on first boot
firstboot --enable
#firstboot --disabled

# Generated using Blivet version 3.7.1
autopart
# Partition clearing information
clearpart --all --initlabel

# Reboot system after install
reboot --kexec

# System timezone
timezone Europe/London --utc

# Root password --HackTheWorld
rootpw --iscrypted $y$j9T$kFcFJPk.ERYNjcScMIBdoU.g$u2ljPOL4aOP0pJk2YQQ0Go/WxwITM5MK1Bjql2ahWj9
